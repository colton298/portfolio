/* ==========================================================================
   Global Theme & Layout
   ========================================================================== */

:root {
  --header-h: 64px;
  --footer-h: 56px;

  /* Dark theme tokens */
  --bg: #0b0d12;
  --text: #e6e8ee;
  --muted: #94a3b8;
  --border: #1a1f2b;
  --surface: #101010;
  --surface-2: #0c0c0c;

  --btn-surface: #111625;
  --btn-surface-hover: #171d2b;

  --link: #ffffff;               /* link color for dark theme */
  --focus-ring: rgba(91,157,255,0.2);
  --accent: rgba(255,255,255,.28);

  /* Themeable surfaces */
  --chip-bg: #0f121a;
  --chip-bg-active: #172033;

  --card-bg: #0f121a;             /* for .todo-item, etc. */
  --card-border: var(--border);
  --card-bg-weak: color-mix(in oklab, var(--bg), #fff 6%); /* subtle “raised” fill */

  --resume-actions-bg: rgba(11,13,18,0.7);
}

html, body { margin: 0; padding: 0; height: 100%; }
html, body, * { font-family: 'Noto Sans', system-ui, -apple-system, Segoe UI, Roboto, sans-serif; }
body { background: var(--bg); color: var(--text); }

/* Generic page containers */
.container {
  max-width: 960px;
  margin: 0 auto;
  min-height: calc(100vh - var(--header-h) - var(--footer-h));
  padding: 2rem 1rem;
  display: flex; flex-direction: column;
  align-items: center; justify-content: center;
  text-align: center;
}
.fullbleed { margin: 0; padding: 0; max-width: none; width: 100%; min-height: calc(100dvh - var(--header-h)); }

.site-footer { border-top: 1px solid var(--border); padding: 1rem; text-align: center; color: var(--muted); }


/* ==========================================================================
   Links
   ========================================================================== */

/* Use theme variable for all links so they flip with light/dark */
a, a:visited { color: var(--link); text-decoration: underline; text-underline-offset: 4px; }
a:hover { opacity: .85; }

/* Auth flows (Forgot/Back/Login links) still use --link which flips by theme */
.auth-page a,
.auth-link,
.auth-page a:visited,
.auth-link:visited { color: var(--link) !important; }
.auth-page a:hover,
.auth-link:hover { opacity: .85 !important; }


/* ==========================================================================
   Reusable UI
   ========================================================================== */

/* Buttons (anchors and <button>) */
.button, button, .row-actions .button, .row-actions button {
  display: inline-block;
  padding: 0.5rem 0.9rem;
  border: 1px solid var(--card-border);
  border-radius: 8px;
  background: var(--btn-surface);
  color: var(--text);                 /* <-- text follows theme */
  text-decoration: none;
  cursor: pointer;
  transition: transform 120ms ease, background 120ms ease, color 120ms ease, border-color 120ms ease;
}
.button:hover, button:hover, .row-actions .button:hover, .row-actions button:hover {
  background: var(--btn-surface-hover);
  transform: translateY(-1px);
}

.card { background: var(--surface); border: 1px solid var(--card-border); border-radius: 12px; padding: 0.75rem; }

/* Chips */
.chip {
  display: inline-flex; align-items: center; gap: 0.35rem;
  padding: 0.35rem 0.6rem;
  border: 1px solid var(--card-border);
  border-radius: 999px;
  background: var(--chip-bg);
  font-size: 0.95rem; color: var(--text);
}
.chip.small { padding: 0.2rem 0.5rem; font-size: 0.8rem; }
.chip.active { background: var(--chip-bg-active); border-color: color-mix(in oklab, var(--card-border), #000 10%); }

/* Helpers */
.muted { color: var(--muted); }
.error-text { color: #f87171; }
.success-text { color: #34d399; }
.form-row-center { display: flex; justify-content: center; }


/* ==========================================================================
   Forms (dark inputs + auth layout + password toggle)
   ========================================================================== */

input, select, textarea {
  font: inherit; color: var(--text);
  background: var(--surface-2);
  border: 1px solid var(--card-border);
  border-radius: 10px;
  padding: .6rem .8rem;
}
input::placeholder, textarea::placeholder { color: #b3bccd; }
input:focus, select:focus, textarea:focus {
  outline: none; border-color: #5b9dff; box-shadow: 0 0 0 3px var(--focus-ring);
}

/* Date/time controls */
.date-input, .time-input,
input[type="date"], input[type="time"] {
  color-scheme: dark;                 /* default (dark theme) */
  background: var(--surface-2);
  color: var(--text);
  border: 1px solid var(--card-border);
  border-radius: 10px;
  padding-right: 2.25rem; /* space for indicator */
}
.date-input::-webkit-calendar-picker-indicator,
.time-input::-webkit-calendar-picker-indicator,
input[type="date"]::-webkit-calendar-picker-indicator,
input[type="time"]::-webkit-calendar-picker-indicator {
  opacity: 1;
  pointer-events: auto;
  filter: brightness(1.3);            /* brighten for dark theme */
  -webkit-appearance: auto;
  appearance: auto;
}

/* Auth layout */
.auth-page {
  max-width: 520px; margin: 0 auto; padding: 1.25rem;
  background: var(--surface); border: 1px solid var(--card-border);
  border-radius: 12px; box-shadow: 0 8px 30px rgba(0,0,0,0.25);
}
.auth-form { display: flex; flex-direction: column; gap: 0.9rem; margin-top: 0.75rem; }
.auth-form label { display: flex; flex-direction: column; gap: 0.4rem; font-weight: 600; }

/* Password input with inside toggle button */
.input-with-icon { position: relative; }
.input-with-icon input { width: 100%; padding-right: 2.5rem; box-sizing: border-box; }
.icon-btn {
  position: absolute; right: 0.5rem; top: 50%; transform: translateY(-50%);
  border: none; background: transparent; padding: 0;
  display: flex; align-items: center; justify-content: center;
  width: 1.75rem; height: 1.75rem; color: #cfcfcf; cursor: pointer;
}
.icon-btn:hover { color: #ffffff; }

/* (Legacy login block kept for compatibility) */
.login-page { max-width: 400px; margin: auto; padding: 2rem; background: #1e1e1e; border-radius: 8px; }
.login-form { display: flex; flex-direction: column; gap: 1rem; }
.login-form label { display: flex; flex-direction: column; font-weight: bold; }
.login-form input { padding: 0.7rem 0.9rem; }


/* ==========================================================================
   Contact Page
   ========================================================================== */

.contact { max-width: 720px; margin: 0 auto; text-align: center; }
.contact h1 { margin-bottom: 1rem; }


/* ==========================================================================
   Resume (Full-Bleed Iframe + Floating Actions)
   ========================================================================== */

.resume-iframe {
  display: block; width: 100%;
  height: calc(100dvh - var(--header-h));
  border: none; background: transparent;
}
.resume-actions {
  position: fixed; left: 50%; transform: translateX(-50%); bottom: 16px;
  display: flex; flex-direction: column; gap: 6px; padding: 8px 12px;
  border: 1px solid var(--border); border-radius: 10px;
  background: var(--resume-actions-bg); backdrop-filter: blur(6px); z-index: 20;
}
.resume-actions a { color: var(--link); text-align: center; }
@media (max-width: 640px) { .resume-actions { bottom: 24px; } }


/* ==========================================================================
   Projects Page
   ========================================================================== */

.projects-page { max-width: 960px; margin: 0 auto; text-align: left; }
.projects-page h1 { text-align: center; margin-bottom: 1rem; }
.projects-page h2 { margin-top: 2rem; }
.projects-page h3 { margin-top: 1.25rem; }
.projects-page h4 { margin-top: 0.75rem; }
.projects-page p  { line-height: 1.6; }
.projects-page ul { margin: 0.5rem 0 1rem 1.25rem; }


/* ==========================================================================
   To-Do Page (split layout + list)
   ========================================================================== */

.todo-page { max-width: 680px; margin: 0 auto; }

.todo-split { display: grid; gap: 1rem; }
@media (min-width: 900px) {
  .todo-split { grid-template-columns: 1fr 1.5fr; align-items: start; }
}
.panel { background: var(--surface); border: 1px solid var(--card-border); border-radius: 12px; padding: 1rem; color: var(--text); }

.add-form { display: flex; flex-direction: column; gap: 0.6rem; }
.add-row  { display: flex; gap: 0.5rem; flex-wrap: wrap; }

.select { padding: .6rem .8rem; border-radius: 10px; border: 1px solid var(--card-border); background: var(--surface-2); color: var(--text); }

/* View header (date controls + filters) */
.view-header { display: flex; flex-direction: column; gap: 0.6rem; }
.day-controls { display: flex; gap: 0.5rem; align-items: center; flex-wrap: wrap; }
.todo-filters { display: flex; gap: 0.5rem; flex-wrap: wrap; }

/* List */
.todo-list { list-style: none; margin: 0.75rem 0 0; padding: 0; display: flex; flex-direction: column; gap: 0.5rem; }
.todo-item {
  display: grid; grid-template-columns: auto 1fr auto auto;
  gap: 0.5rem; align-items: center; padding: 0.6rem 0.75rem;
  border: 1px solid var(--card-border); border-radius: 10px; background: var(--card-bg);
}
.todo-item.done { opacity: 0.75; }

.todo-text { word-break: break-word; }

.meta-chips { display: flex; gap: 0.35rem; margin-right: 0.5rem; }
.meta-chips .chip.small[title="This task has no date"] { opacity: 0.85; }

.row-actions { display: flex; gap: 0.5rem; flex-wrap: wrap; }

/* Editing layout */
.edit-col { display: flex; flex-direction: column; gap: 0.5rem; flex: 1; }
.edit-row { display: flex; gap: 0.5rem; flex-wrap: wrap; }


/* ==========================================================================
   Schedule / Timeline header & containers
   ========================================================================== */

.schedule-header { display: flex; align-items: center; justify-content: space-between; gap: .75rem; }
.schedule-controls { display: flex; gap: .75rem; align-items: center; }
.mode-switch .chip.active { border-color: var(--accent); }

/* Timeline wrapper */
.timeline { margin-top: 0.75rem; width: 100%; }
.timeline-card {
  border: 1px solid var(--card-border);
  border-radius: 12px;
  background: var(--surface);
  padding: 0.5rem;
  height: var(--timeline-h, 340px);
}
.timeline-svg { display: block; width: 100%; height: 100%; border-radius: 10px; }


/* ==========================================================================
   Week View (compact task cards)
   ========================================================================== */

.week-grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: .5rem;
  width: 100%;
}
.week-col { display: flex; flex-direction: column; gap: .25rem; min-width: 0; }
.week-col-header { font-size: .9rem; opacity: .9; }

.week-list {
  list-style: none;
  margin: .25rem 0 0;
  padding: 0;
  display: grid;
  gap: .4rem;
}
.week-list-item { display: block; min-width: 0; }

/* Card/pill for each weekly task (name above time) */
.week-card {
  display: grid;
  grid-template-rows: auto auto;
  gap: .15rem;
  padding: .55rem .65rem;
  border: 1px solid var(--card-border);
  border-radius: .75rem;
  background: var(--card-bg-weak);
  box-shadow: 0 1px 2px rgba(0,0,0,.25);
}
.week-card:hover { border-color: var(--accent); background: rgba(255,255,255,.06); }

.week-card .text { font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.week-card .time { font-size: .85rem; opacity: .85; white-space: nowrap; }

.week-list-item.done .week-card { opacity: .85; }
.week-list-item.done .week-card .text { text-decoration: line-through; opacity: .8; }

@media (max-width: 820px) {
  .week-grid { gap: .4rem; }
  .week-card { padding: .5rem .55rem; }
}


/* ==========================================================================
   Month View (compact calendar)
   ========================================================================== */

.month-grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: .5rem;
}
.month-dow { font-size: .8rem; opacity: .7; text-align: center; }
.month-cell {
  border: 1px solid var(--card-border);
  border-radius: .5rem;
  padding: .5rem;
  min-height: 90px;
}
.month-cell-header { display: flex; align-items: center; justify-content: space-between; font-weight: 600; }
.month-cell .badge {
  font-size: .75rem; padding: 0 .35rem;
  border: 1px solid var(--card-border); border-radius: .5rem; opacity: .8;
}
.month-cell-list {
  margin: .35rem 0 0; padding: 0; list-style: none;
  display: grid; gap: .15rem; font-size: .85rem;
}
.month-item { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.month-more { font-size: .8rem; }


/* ==========================================================================
   Light theme (applied when <html data-theme="light">)
   ========================================================================== */

:root[data-theme="light"] {
  --bg: #f6f7fb;
  --text: #0b0d12;
  --muted: #4b5563;
  --border: #d9dfeb;
  --surface: #ffffff;
  --surface-2: #f2f4f8;

  --btn-surface: #ffffff;
  --btn-surface-hover: #f3f6fb;

  --link: #0b0d12;                 /* links are dark in light theme */
  --focus-ring: rgba(37, 99, 235, 0.18);
  --accent: rgba(0,0,0,.22);

  --chip-bg: #eef2f8;
  --chip-bg-active: #dfe8f6;

  --card-bg: #ffffff;
  --card-border: #cfd7e6;
  --card-bg-weak: #f6f9ff;

  --resume-actions-bg: rgba(255,255,255,0.85);
}

/* PINK THEME — easter egg */
:root[data-theme="pink"] {
  /* Palette */
  --bg: #ffe6f4;                 /* page background */
  --text: #3a0b23;               /* main text */
  --muted: #7a3a57;
  --border: #f4b7d3;
  --surface: #fff5fb;            /* panels */
  --surface-2: #ffeefd;          /* inputs */

  --btn-surface: #ffecf7;        /* buttons */
  --btn-surface-hover: #ffe3f3;

  --link: #a0006a;               /* links pop nicely */
  --focus-ring: rgba(255, 0, 122, 0.18);
  --accent: rgba(160, 0, 106, .28);

  --chip-bg: #ffe3f3;
  --chip-bg-active: #ffd1ea;

  --card-bg: #fff;               /* todo items */
  --card-border: #f4b7d3;
  --card-bg-weak: #fff0f8;       /* week cards */

  --resume-actions-bg: rgba(255, 240, 248, 0.9); /* floating resume box */
}

/* Ensure date/time pickers look right in pink (light) mode */
:root[data-theme="pink"] .date-input,
:root[data-theme="pink"] .time-input,
:root[data-theme="pink"] input[type="date"],
:root[data-theme="pink"] input[type="time"] {
  color-scheme: light;
}
:root[data-theme="pink"] .date-input::-webkit-calendar-picker-indicator,
:root[data-theme="pink"] .time-input::-webkit-calendar-picker-indicator,
:root[data-theme="pink"] input[type="date"]::-webkit-calendar-picker-indicator,
:root[data-theme="pink"] input[type="time"]::-webkit-calendar-picker-indicator {
  filter: none;
}


/* Inputs honor theme in light mode: use light color-scheme and normal icon color */
:root[data-theme="light"] .date-input,
:root[data-theme="light"] .time-input,
:root[data-theme="light"] input[type="date"],
:root[data-theme="light"] input[type="time"] {
  color-scheme: light;
}
:root[data-theme="light"] .date-input::-webkit-calendar-picker-indicator,
:root[data-theme="light"] .time-input::-webkit-calendar-picker-indicator,
:root[data-theme="light"] input[type="date"]::-webkit-calendar-picker-indicator,
:root[data-theme="light"] input[type="time"]::-webkit-calendar-picker-indicator {
  filter: none;                      /* remove white tint in light mode */
}

:root[data-theme="light"] input, 
:root[data-theme="light"] select,
:root[data-theme="light"] textarea {
  border-color: #cfd7e6;
}
